(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(23)},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),s=n(11),i=n(4),o=n(5),c=n(7),l=n(6),h=n(8),u=n(0),p=n.n(u),d=n(12),g=n.n(d),f=n(13),m=n(1),P=n(3),v=n(2),y=function(e){var t=e.searchingPhones,n=e.phones,a=e.perPage,r=e.activePage,s=e.pageClickHandler,i=null===t?Math.ceil(n.length/a):Math.ceil(t.length/a);r>i?r=i:r<1&&(r=1);for(var o=[],c=function(e){var t=a*e-a,n=a*e;o.push(p.a.createElement("span",{key:e,className:r===e?"TableComponent-pagination-item TableComponent-pagination-active-page":"TableComponent-pagination-item",onClick:function(a){return s(t,n,e)}},e))},l=1;l<=i;l++)c(l);return p.a.createElement("div",null,o)},b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).state={currentPhones:[],staticCurrentPhones:[],sortedBy:"",sortDirections:"",searchQuery:"",editInputStyle:{top:0,left:0,width:"120px",height:"50px",display:"none"},editInputQuery:"",editCellLocation:{phoneId:"",header:""},itemsPerPage:"20",activePage:1,searchPhonesBufer:null},e.pageClickHandler=e.pageClickHandler.bind(Object(v.a)(Object(v.a)(e))),e}return Object(h.a)(t,e),Object(o.a)(t,[{key:"withCheckboxes",value:function(e){return e.map(function(e){return Object(P.a)({},e,{checked:!1})})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.config,n=Object.keys(t).filter(function(e){return t[e].isSortable}),a={},r=new URLSearchParams(window.location.search),s=r.get("perpage")||this.state.itemsPerPage,i=+r.get("page")||this.state.activePage,o=null===this.state.searchPhonesBufer?Math.ceil(this.props.phones.length/s):Math.ceil(this.state.searchPhonesBufer.length/s);r.get("perpage")&&!["3","5","10","20"].some(function(e){return e===r.get("perpage")})&&(r.set("perpage","20"),s="20",window.history.pushState(null,null,"?".concat(r.toString()))),r.get("page")&&(i>o&&(i=o,r.set("page",i),window.history.pushState(null,null,"?".concat(r.toString()))),r.set("page",i),window.history.pushState(null,null,"?".concat(r.toString())));var c=s*i-s,l=s*i,h=!0,u=!1,p=void 0;try{for(var d,g=n[Symbol.iterator]();!(h=(d=g.next()).done);h=!0){a[d.value]="\u2195"}}catch(f){u=!0,p=f}finally{try{h||null==g.return||g.return()}finally{if(u)throw p}}this.setState({itemsPerPage:s,activePage:i,searchQuery:r.get("query")||"",currentPhones:this.withCheckboxes(this.props.phones).slice(c,l),staticCurrentPhones:this.withCheckboxes(this.props.phones),sortDirections:a},function(){if(r.get("sortby")){var t=r.get("sortby").split("_")[0],n=r.get("sortby").split("_")[1],a=e.props.config[t].isSortable;e.sortBy(a,t,n)}r.get("query")&&e.searchHandler(null,r.get("query"))})}},{key:"selectPhoneHandler",value:function(e){var t=Object(m.a)(this.state.currentPhones);t=t.map(function(t){return t.id===e?Object(P.a)({},t,{checked:!t.checked}):t}),this.setState({currentPhones:t})}},{key:"selectAllHandler",value:function(e){var t=e.target.checked,n=Object(m.a)(this.state.currentPhones);n=n.map(function(e){return Object(P.a)({},e,{checked:t})}),this.setState({currentPhones:n})}},{key:"isAllSelected",value:function(){return this.state.currentPhones.every(function(e){return e.checked})}},{key:"sortBy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"down";if(e){var a=window.location.search,r=new URLSearchParams(a),s="";"up"===n&&(s=t);var i=typeof this.state.currentPhones[0][t],o=Object(m.a)(this.state.staticCurrentPhones),c=null!==this.state.searchPhonesBufer?Object(m.a)(this.state.searchPhonesBufer):null,l=this.getRefreshedSortArrows();t===s||this.state.sortedBy?("string"===i?(o.sort(function(e,n){return n[t].localeCompare(e[t])}),null!==c&&c.sort(function(e,n){return n[t].localeCompare(e[t])})):"number"===i&&(o.sort(function(e,n){return n[t]-e[t]}),null!==c&&c.sort(function(e,n){return n[t]-e[t]})),l[t]="\u2191",r.set("sortby","".concat(t,"_up")),window.history.pushState(null,null,"?".concat(r.toString())),this.setState({currentPhones:null===c?o.slice(0,this.state.itemsPerPage):c.slice(0,this.state.itemsPerPage),staticCurrentPhones:o,searchPhonesBufer:c,sortedBy:"",activePage:1,sortDirections:l})):("string"===i?(o.sort(function(e,n){return e[t].localeCompare(n[t])}),null!==c&&c.sort(function(e,n){return e[t].localeCompare(n[t])})):"number"===i&&(o.sort(function(e,n){return e[t]-n[t]}),null!==c&&c.sort(function(e,n){return e[t]-n[t]})),l[t]="\u2193",r.set("sortby","".concat(t,"_down")),window.history.pushState(null,null,"?".concat(r.toString())),this.setState({currentPhones:null===c?o.slice(0,this.state.itemsPerPage):c.slice(0,this.state.itemsPerPage),staticCurrentPhones:o,searchPhonesBufer:c,sortedBy:t,activePage:1,sortDirections:l}))}}},{key:"searchHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.props.config,a=t||e.target.value,r=window.location.search,s=new URLSearchParams(r);""===a?s.delete("query"):s.set("query","".concat(a)),s.set("page","1"),window.history.pushState(null,null,"?".concat(s.toString()));var i=Object(m.a)(this.state.staticCurrentPhones),o=Object.keys(n).filter(function(e){return n[e].isSearchable}),c=new RegExp(a,"i");i=i.filter(function(e){return o.some(function(t){return c.test(e[t])})}),this.setState({searchQuery:a,currentPhones:i.slice(0,this.state.itemsPerPage),searchPhonesBufer:""===a?null:i,activePage:1})}},{key:"showSelectedHandler",value:function(){var e=Object(m.a)(this.state.currentPhones);0!==(e=e.filter(function(e){return e.checked})).length&&this.setState({currentPhones:e})}},{key:"showAllHandler",value:function(){var e=this.state.activePage*this.state.itemsPerPage-this.state.itemsPerPage,t=this.state.activePage*this.state.itemsPerPage,n=null===this.state.searchPhonesBufer?Object(m.a)(this.state.staticCurrentPhones):Object(m.a)(this.state.searchPhonesBufer);this.setState({currentPhones:n.slice(e,t)})}},{key:"editCellHandler",value:function(e){var t=e.target.dataset.phoneId,n=e.target.dataset.header,a=e.target.textContent,r=e.target.getBoundingClientRect();this.setState({editInputStyle:{display:"block",top:r.top,left:r.left,width:r.right-r.left-3,height:r.bottom-r.top-5},editCellLocation:{phoneId:t,header:n},editInputQuery:a})}},{key:"editInputHandler",value:function(e){var t=e.target.value;this.setState({editInputQuery:t})}},{key:"submitEditHandler",value:function(e){if(13===e.which){var t=this.state.editCellLocation,n=t.phoneId,a=t.header,r=this.state.editInputQuery,s=Object(m.a)(this.state.currentPhones);s=s.map(function(e){return e.id===n&&(e[a]=r),e}),this.setState({currentPhones:s,editInputStyle:{top:0,left:0,width:"120px",height:"50px",display:"none"},editInputQuery:"",editCellLocation:{phoneId:"",header:""}})}}},{key:"itemsPerPageHandler",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||e.target.value,n=window.location.search,a=new URLSearchParams(n);a.set("perpage","".concat(t)),window.history.pushState(null,null,"?".concat(a.toString()));var r=null===this.state.searchPhonesBufer?Object(m.a)(this.state.staticCurrentPhones):Object(m.a)(this.state.searchPhonesBufer);this.setState({itemsPerPage:t,currentPhones:r.slice(0,t),activePage:1})}},{key:"pageClickHandler",value:function(e,t,n){var a=window.location.search,r=new URLSearchParams(a);r.set("page","".concat(n)),window.history.pushState(null,null,"?".concat(r.toString()));var s=null===this.state.searchPhonesBufer?Object(m.a)(this.state.staticCurrentPhones):Object(m.a)(this.state.searchPhonesBufer);this.setState({currentPhones:s.slice(e,t),activePage:n})}},{key:"getRefreshedSortArrows",value:function(){var e=Object(P.a)({},this.state.sortDirections);for(var t in e)e[t]="\u2195";return e}},{key:"render",value:function(){var e=this,t=function(t){return"\u2195"===e.state.sortDirections[t]?{color:"blue"}:"\u2193"===e.state.sortDirections[t]?{color:"green"}:"\u2191"===e.state.sortDirections[t]?{color:"red"}:void 0};return p.a.createElement("div",{className:"TableComponent-container"},p.a.createElement("input",{type:"text",style:{display:this.state.editInputStyle.display,position:"absolute",top:this.state.editInputStyle.top,left:this.state.editInputStyle.left,width:this.state.editInputStyle.width,height:this.state.editInputStyle.height},value:this.state.editInputQuery,onChange:function(t){return e.editInputHandler(t)},onKeyDown:function(t){return e.submitEditHandler(t)}}),p.a.createElement("div",{className:"TableComponent-pagination-container"},p.a.createElement("select",{value:this.state.itemsPerPage,onChange:function(t){return e.itemsPerPageHandler(t)},className:"TableComponent-items-per-page"},p.a.createElement("option",{value:"3"},"3"),p.a.createElement("option",{value:"5"},"5"),p.a.createElement("option",{value:"10"},"10"),p.a.createElement("option",{value:"20"},"20")),p.a.createElement(y,{perPage:this.state.itemsPerPage,searchingPhones:this.state.searchPhonesBufer,phones:this.state.staticCurrentPhones,activePage:this.state.activePage,pageClickHandler:this.pageClickHandler})),p.a.createElement("button",{className:"TableComponent-show-btn",onClick:function(){return e.showSelectedHandler()}},"Show selected"),p.a.createElement("button",{className:"TableComponent-show-btn",onClick:function(){return e.showAllHandler()}},"Show all"),p.a.createElement("input",{type:"text",className:"TableComponent-search-input",placeholder:" Type to search ...",value:this.state.searchQuery,onChange:function(t){return e.searchHandler(t)}}),p.a.createElement("table",{className:"TableComponent-table"},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,p.a.createElement("input",{type:"checkbox",checked:this.isAllSelected(),onChange:function(t){return e.selectAllHandler(t)}})),Object.entries(this.props.config).map(function(n){var a=Object(f.a)(n,2),r=a[0],s=a[1];return p.a.createElement("th",{className:s.isSortable?"TableComponent-table-sortable-header":null,key:r,onClick:function(){return e.sortBy(s.isSortable,r)}},s.title," ",s.isSortable&&p.a.createElement("span",{style:t(r)},e.state.sortDirections[r]))}))),p.a.createElement("tbody",null,this.state.currentPhones.map(function(t){return p.a.createElement("tr",{key:t.id},p.a.createElement("td",null,p.a.createElement("input",{type:"checkbox",checked:t.checked,onChange:function(){return e.selectPhoneHandler(t.id)}})),Object.keys(e.props.config).map(function(n){return p.a.createElement("td",{key:n,"data-phone-id":t.id,"data-header":n,onDoubleClick:function(t){e.editCellHandler(t)}},t[n])}))}))),p.a.createElement("div",{className:"TableComponent-pagination-bot-container"},p.a.createElement(y,{perPage:this.state.itemsPerPage,searchingPhones:this.state.searchPhonesBufer,phones:this.state.staticCurrentPhones,activePage:this.state.activePage,pageClickHandler:this.pageClickHandler})))}}]),t}(u.Component),w=(n(22),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[],columnConfig:{name:{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",isSortable:!0,isSearchable:!0},age:{title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",isSortable:!0},snippet:{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isSearchable:!0}}},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/vladikcoder/phones-app/master/phones/phones.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({phones:n});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return p.a.createElement("div",{className:"App"},p.a.createElement("h1",null,"Data table"),this.state.phones.length>0?p.a.createElement(b,{phones:this.state.phones,config:this.state.columnConfig}):"loading...")}}]),t}(p.a.Component)),S=document.getElementById("root");g.a.render(p.a.createElement(w,null),S)}},[[14,1,2]]]);
//# sourceMappingURL=main.4a299cc7.chunk.js.map