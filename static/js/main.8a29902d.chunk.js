(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(25)},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),o=a(12),i=a(5),s=a(6),c=a(8),l=a(7),h=a(9),u=a(0),d=a.n(u),p=a(13),m=a.n(p),f=a(1),g=a(4),v=a(2),y=a(3),k=(a(22),function(e){for(var t=e.phones,a=e.itemsPerPage,n=e.clickHandler,r=e.activePage,o=Math.ceil(t.length/a),i=[],s=function(e){var t=e*a-a,o=e*a;i.push(d.a.createElement("span",{key:e,onClick:function(){return n(t,o,e)},className:r===e?"Pagination-page Pagination-active":"Pagination-page"},e))},c=1;c<=o;c++)s(c);return d.a.createElement("div",null,i)}),b=(a(23),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={phones:a.withCheckboxes(Object(v.a)(a.props.phones)),allCheckedPages:[],sortedBy:{},query:"",itemsPerPage:"20",selectedPhones:[],activePage:1,editInputStyle:{top:0,left:0,width:"120px",height:"50px",display:"none"},editInputQuery:"",editCellLocation:{phoneId:"",header:""}},a.paginationClickHandler=a.paginationClickHandler.bind(Object(y.a)(Object(y.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(window.location.search),t=e.get("sorted"),a=e.get("query"),n=e.get("perpage"),r=+e.get("page");if(t){var o=t.split("_"),i=Object(g.a)(o,2),s=i[0],c=i[1];this.props.config[s].isSortable&&this.setState({sortedBy:{header:s,direction:c}})}a&&this.setState({query:a}),n&&this.setState({itemsPerPage:n,showTo:n}),r&&this.setState({activePage:r,showFrom:r*n-n,showTo:r*n})}},{key:"withCheckboxes",value:function(e){return e.map(function(e){return Object(f.a)({},e,{checked:!1})})}},{key:"selectAllHandler",value:function(e,t,a){var n=!this.isAllOnPageChecked(a),r=this.state,o=r.showFrom,i=r.showTo,s=r.allCheckedPages,c=Object(v.a)(e);c=c.map(function(e,t){return t>=o&&t<i?Object(f.a)({},e,{checked:n}):e});var l=this.state.phones.map(function(e){var t=Object(f.a)({},e);return c.forEach(function(a){a.id===e.id&&(t.checked=a.checked)}),t});s=n?[].concat(Object(v.a)(s),[a]):s.filter(function(e){return e!==a}),t.length>0?this.setState({allCheckedPages:s,selectedPhones:c}):this.setState({allCheckedPages:s,phones:l})}},{key:"selectPhoneHandler",value:function(e,t){var a=this.state,n=a.selectedPhones,r=a.phones,o=a.allCheckedPages,i=a.showFrom,s=a.showTo,c=n.length>0?n:r,l=(c=c.map(function(t){return e===t.id?Object(f.a)({},t,{checked:!t.checked}):t})).slice(i||0,s||20);o=this.isAllSelected(l)?[].concat(Object(v.a)(o),[t]):o.filter(function(e){return e!==t}),n.length>0?this.setState({allCheckedPages:o,selectedPhones:c}):this.setState({allCheckedPages:o,phones:c})}},{key:"isAllSelected",value:function(e){return e.every(function(e){return e.checked})}},{key:"isAllOnPageChecked",value:function(e){return this.state.allCheckedPages.includes(e)}},{key:"getSortArrow",value:function(e){var t=this.state.sortedBy;return t.header===e&&"down"===t.direction?{arrow:"\u2193",color:"green"}:t.header===e&&"up"===t.direction?{arrow:"\u2191",color:"red"}:{arrow:"\u2195",color:"blue"}}},{key:"sortStateHandler",value:function(e){this.setState(function(t){var a=t.sortedBy,n=a.header,r=a.direction,o={};return n===e&&"up"===r?o=Object(f.a)({},t.sortedBy,{direction:"down"}):n===e&&"down"===r?o=Object(f.a)({},t.sortedBy,{direction:"up"}):(o.header=e,o.direction="down"),{sortedBy:o,showFrom:0,showTo:t.itemsPerPage,activePage:1}})}},{key:"sortBy",value:function(e){var t=this.state.sortedBy,a=Object(v.a)(e),n=typeof a[0][t.header];return"up"===t.direction?("string"===n?a.sort(function(e,a){return a[t.header].localeCompare(e[t.header])}):"number"===n&&a.sort(function(e,a){return a[t.header]-e[t.header]}),this.setURLSearchParam("sorted","".concat(t.header,"_up"))):"down"===t.direction&&("string"===n?a.sort(function(e,a){return e[t.header].localeCompare(a[t.header])}):"number"===n&&a.sort(function(e,a){return e[t.header]-a[t.header]}),this.setURLSearchParam("sorted","".concat(t.header,"_down"))),a}},{key:"showSelectedHandler",value:function(){var e=this.state,t=e.selectedPhones,a=e.phones,n=e.itemsPerPage,r=t.length>0?t:a,o=a.map(function(e){return Object(f.a)({},e,{checked:!1})});0!==(r=r.filter(function(e){return e.checked}).map(function(e){return Object(f.a)({},e,{checked:!1})})).length&&(this.setURLSearchParam("page",1),this.setState({selectedPhones:r,phones:o,showFrom:0,showTo:+n,activePage:1,allCheckedPages:[]}))}},{key:"showAllHandler",value:function(){this.setURLSearchParam("page",1),this.setState({selectedPhones:[],activePage:1,showFrom:0,showTo:+this.state.itemsPerPage,allCheckedPages:[]})}},{key:"getUncheckedPhones",value:function(e){return e.map(function(e){return Object(f.a)({},e,{checked:!1})})}},{key:"searchHandler",value:function(e){var t=this.getUncheckedPhones(this.state.phones),a=""===e;this.setURLSearchParam("query",e,a),this.setState({query:e,phones:t,allCheckedPages:[],showFrom:0,showTo:this.state.itemsPerPage,activePage:1})}},{key:"setFilteredPhones",value:function(e){var t=new RegExp(this.state.query,"i"),a=Object.entries(this.props.config).filter(function(e){return Object(g.a)(e,2)[1].isSearchable}).map(function(e){return Object(g.a)(e,1)[0]});return Object(v.a)(e).filter(function(e){return a.some(function(a){return t.test(e[a])})})}},{key:"itemsPerPageHandler",value:function(e){var t=this.getUncheckedPhones(this.state.phones);this.setURLSearchParam("perpage",e),this.setState({itemsPerPage:e,showFrom:0,showTo:+e,activePage:1,phones:t,allCheckedPages:[]})}},{key:"paginationClickHandler",value:function(e,t,a){this.setURLSearchParam("page",a),this.setState({showFrom:e,showTo:t,activePage:a})}},{key:"editCellHandler",value:function(e){var t=e.target,a=t.offsetParent,n=a.offsetTop+t.offsetTop,r=a.offsetLeft+t.offsetLeft,o=e.target.dataset.phoneId,i=e.target.dataset.header,s=e.target.textContent;this.setState({editInputStyle:{display:"block",top:n,left:r,width:t.clientWidth-4,height:t.clientHeight-4},editCellLocation:{phoneId:o,header:i},editInputQuery:s})}},{key:"editInputHandler",value:function(e){var t=e.target.value;this.setState({editInputQuery:t})}},{key:"submitEditHandler",value:function(e){if("Enter"===e.key){var t=this.state.editCellLocation,a=t.phoneId,n=t.header,r=this.state,o=r.editInputQuery,i=r.phones,s=Object(v.a)(i);s=s.map(function(e){return e.id===a&&(e[n]=o),e}),this.setState({phones:s,editInputStyle:{top:0,left:0,width:"120px",height:"50px",display:"none"},editInputQuery:"",editCellLocation:{phoneId:"",header:""}})}}},{key:"setURLSearchParam",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=window.location.search,r=new URLSearchParams(n);r.set(e,t),a&&r.delete(e),window.history.pushState(null,null,"?".concat(r.toString()))}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedPhones,n=t.itemsPerPage,r=t.phones,o=t.query,i=t.showFrom,s=t.showTo,c=t.activePage,l=this.props.config;a.length>0&&(r=a),r=this.sortBy(r);var h=(r=this.setFilteredPhones(r)).slice(i||0,s||20);return d.a.createElement("div",{className:"TableComponent-container"},d.a.createElement("textarea",{type:"text",style:{display:this.state.editInputStyle.display,position:"absolute",resize:"none",top:this.state.editInputStyle.top,left:this.state.editInputStyle.left,width:this.state.editInputStyle.width,height:this.state.editInputStyle.height},value:this.state.editInputQuery,onChange:function(t){return e.editInputHandler(t)},onKeyDown:function(t){return e.submitEditHandler(t)}}),d.a.createElement("div",{className:"TableComponent-pagination-container"},d.a.createElement("select",{value:n,onChange:function(t){return e.itemsPerPageHandler(t.target.value)},className:"TableComponent-items-per-page"},d.a.createElement("option",{value:"3"},"3"),d.a.createElement("option",{value:"5"},"5"),d.a.createElement("option",{value:"10"},"10"),d.a.createElement("option",{value:"20"},"20")),d.a.createElement(k,{phones:r,itemsPerPage:n,clickHandler:this.paginationClickHandler,activePage:c})),d.a.createElement("div",{className:"TableComponent-filter-container"},d.a.createElement("button",{type:"button",onClick:function(){return e.showSelectedHandler()},className:"TableComponent-filter-selected-btn"},"Show selected"),d.a.createElement("button",{type:"button",onClick:function(){return e.showAllHandler()}},"Show All"),d.a.createElement("input",{onChange:function(t){return e.searchHandler(t.target.value)},placeholder:" Type to search ...",type:"text",value:o})),d.a.createElement("table",{className:"TableComponent-table"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,d.a.createElement("input",{type:"checkbox",checked:this.isAllSelected(h),onChange:function(){return e.selectAllHandler(r,a,c)}})),Object.entries(l).map(function(t){var a=Object(g.a)(t,2),n=a[0],r=a[1],o=e.getSortArrow(n),i=o.color,s=o.arrow;return d.a.createElement("th",{className:r.isSortable?"TableComponent-table-sortable-header":null,key:n,onClick:r.isSortable?function(){return e.sortStateHandler(n)}:null},r.title,r.isSortable&&d.a.createElement("span",{style:{color:i}}," ",s))}))),d.a.createElement("tbody",null,h.map(function(t){return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null,d.a.createElement("input",{type:"checkbox",checked:t.checked,onChange:function(){return e.selectPhoneHandler(t.id,c)}})),Object.keys(l).map(function(a){return d.a.createElement("td",{key:a,"data-phone-id":t.id,"data-header":a,onDoubleClick:function(t){return e.editCellHandler(t)}},t[a])}))}))),d.a.createElement("div",{className:"TableComponent-pagination-bot-container"},d.a.createElement(k,{phones:r,itemsPerPage:n,clickHandler:this.paginationClickHandler,activePage:c})))}}]),t}(u.Component)),P=(a(24),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={phones:[],columnConfig:{name:{title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",isSortable:!0,isSearchable:!0},age:{title:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",isSortable:!0},snippet:{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",isSearchable:!0}}},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/vladikcoder/phones-app/master/phones/phones.json");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({phones:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return d.a.createElement("div",{className:"App"},d.a.createElement("h1",null,"Data table"),this.state.phones.length>0?d.a.createElement(b,{phones:this.state.phones,config:this.state.columnConfig}):"loading...")}}]),t}(d.a.Component)),w=document.getElementById("root");m.a.render(d.a.createElement(P,null),w)}},[[14,1,2]]]);
//# sourceMappingURL=main.8a29902d.chunk.js.map